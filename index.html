<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TXRP Staff Team Official HandBook</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom Dark Mode Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        /* Style for glossary items to make them look clickable */
        .glossary-item {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .glossary-item:hover {
            background-color: #1e293b; /* Slate 800 hover */
        }
        .glossary-definition {
            display: none;
            padding-left: 1rem;
            margin-top: 0.5rem;
            border-left: 3px solid #6366f1; /* Indigo 500 */
        }
        /* Custom style for checklist inputs */
        input[type='checkbox'] {
            background-color: #1e293b; /* Slate 800 */
            border-color: #475569; /* Slate 600 */
            border-radius: 4px;
        }
        input[type='checkbox']:checked {
            background-color: #6366f1; /* Indigo 500 */
            border-color: #6366f1;
        }
        /* Style for the clickable suggestion buttons */
        .punishment-button {
            transition: background-color 0.2s, transform 0.1s;
        }
        .punishment-button:hover {
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="min-h-screen selection:bg-indigo-500 selection:text-white">

    <!-- Quick Search Floating Button -->
    <button id="scrollToSearch" class="fixed bottom-6 right-6 px-6 py-3 bg-indigo-600 text-white font-bold rounded-full shadow-2xl hover:bg-indigo-500 transition-all duration-300 transform scale-0 opacity-0 z-50 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 flex items-center" onclick="jumpToHeader()" aria-label="Quick Search Handbook">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        Quick Search
    </button>

    <div class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Header & Search Bar -->
        <header id="mainHeader" class="bg-slate-800 shadow-2xl rounded-2xl p-8 mb-10 border-t-4 border-indigo-500">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <div>
                    <h1 class="text-3xl sm:text-4xl font-extrabold text-white tracking-tight mb-2">๐ TXRP Staff HandBook</h1>
                    <p class="text-slate-400 font-medium">Official Operations & Conduct Manual</p>
                </div>
                <div class="mt-4 md:mt-0 bg-slate-900 px-4 py-2 rounded-lg border border-slate-700">
                    <p class="text-xs text-slate-500 uppercase tracking-wider font-bold">Maintained By</p>
                    <p class="text-indigo-400 font-semibold">Zainbtw (Developer)</p>
                </div>
            </div>

            <!-- Document Notice -->
            <div class="mb-6 bg-amber-900/20 border-l-4 border-amber-500 p-4 rounded-r-lg">
                <p class="text-amber-200 text-sm font-medium flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                    This document is subject to change at any time and may be updated by Zainbtw.
                </p>
            </div>

            <!-- Search Input -->
            <div class="relative">
                <input type="text" id="searchInput" onkeyup="filterContent()" 
                       placeholder="๐ Search rules (e.g., 'NLR', 'Ban', 'Vehicle')..."
                       class="w-full p-4 pl-12 bg-slate-900 border-2 border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 text-lg placeholder-slate-500 text-white shadow-inner">
            </div>
        </header>

        <!-- Main Content Container -->
        <main id="contentContainer" class="space-y-8">

            <!-- ยง1.0 GENERAL POLICY -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-blue-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-blue-500/10 text-blue-400 py-1 px-3 rounded-md text-lg mr-3">ยง1.0</span>
                    General Policy & Conduct
                </h2>
                
                <div class="space-y-8">
                    <!-- 1.1 Core Rules -->
                    <section>
                        <h3 class="text-xl font-semibold text-blue-300 mb-3">ยง1.1 - Core Staff Rules</h3>
                        <ul class="space-y-3 text-slate-300 list-disc pl-5">
                            <li><strong class="text-white">Professionalism:</strong> Treat all players with respect, remain unbiased, and encourage roleplay instead of shutting it down unnecessarily.</li>
                            <li><strong class="text-white">Staff Chat:</strong> Keep staff chat clear and use it only for important communication.</li>
                            <li><strong class="text-red-400">Promotion Policy:</strong> Asking for or talking about promotions is grounds for <strong class="underline">Immediate Termination</strong>.</li>
                            <li><strong class="text-red-400">Off-Duty Restriction:</strong> NEVER use administrative commands (e.g., :to, :kick, :ban) while operating as a civilian (10-7).</li>
                            <li><strong class="text-white">Chain of Command (CoC):</strong> You must follow the Chain of Command at all times. Report higher-level issues to Senior Staff or Administration.</li>
                            <li><strong class="text-white">Action Logging:</strong> <span class="text-red-400 font-bold">MANDATORY:</span> Log all kicks and bans in the Melony Platform or in-game logs immediately.</li>
                        </ul>
                    </section>

                    <!-- 1.2 Appearance -->
                    <section>
                        <h3 class="text-xl font-semibold text-blue-300 mb-3">ยง1.2 - Staff Duty Appearance</h3>
                        <ul class="space-y-2 text-slate-300 list-disc pl-5">
                            <li><strong class="text-white">Hair/Beard:</strong> Natural colors only (Black, Brown, Gray).</li>
                            <li><strong class="text-white">Accessories:</strong> No excessive or high-value jewelry.</li>
                            <li><strong class="text-white">Package:</strong> You must use the <strong>1.0 ("Blocky") package</strong> for consistent identification.</li>
                        </ul>
                    </section>

                    <!-- 1.4 Quotas -->
                    <section>
                        <h3 class="text-xl font-semibold text-blue-300 mb-3">ยง1.4 - Weekly Quota Requirements</h3>
                        <div class="overflow-x-auto rounded-lg border border-slate-700">
                            <table class="min-w-full divide-y divide-slate-700">
                                <thead class="bg-slate-900">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-bold text-slate-400 uppercase">Team</th>
                                        <th class="px-4 py-3 text-left text-xs font-bold text-slate-400 uppercase">Requirement</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-slate-800 divide-y divide-slate-700 text-sm">
                                    <tr><td class="px-4 py-3 text-white font-medium">Executive/Ownership</td><td class="px-4 py-3 text-emerald-400">Quota Exempt (3 Tickets/Week)</td></tr>
                                    <tr><td class="px-4 py-3 text-white font-medium">Directives Team</td><td class="px-4 py-3">4 Hours Moderation/Week</td></tr>
                                    <tr><td class="px-4 py-3 text-white font-medium">Leadership Team</td><td class="px-4 py-3">5 Hours Moderation/Week</td></tr>
                                    <tr><td class="px-4 py-3 text-white font-medium">Rest of Staff</td><td class="px-4 py-3 text-amber-400">6 Hours Moderation/Week</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    
                     <!-- 1.5 Melony -->
                    <section>
                         <h3 class="text-xl font-semibold text-blue-300 mb-3">ยง1.5 - Melony Moderation Platform</h3>
                         <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 flex items-center justify-between">
                            <div>
                                <p class="text-slate-300 mb-1">Centralized platform for reports & logging.</p>
                                <p class="text-xs text-slate-500">Mandatory for all staff.</p>
                            </div>
                            <div class="text-right">
                                <span class="block text-xs text-slate-500 uppercase font-bold mb-1">Invite Code</span>
                                <code class="bg-indigo-500/20 text-indigo-300 px-3 py-1 rounded font-mono text-lg">NFLDRU</code>
                            </div>
                         </div>
                    </section>
                </div>
            </div>

            <!-- ยง2.0 VEHICLE & TOOLS -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-purple-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-purple-500/10 text-purple-400 py-1 px-3 rounded-md text-lg mr-3">ยง2.0</span>
                    Staff Vehicle & Tool Usage
                </h2>

                <div class="space-y-8">
                    <!-- 2.1 Vehicles -->
                    <section>
                        <h3 class="text-xl font-semibold text-purple-300 mb-3">ยง2.1 - Vehicle Requirements</h3>
                        <ul class="space-y-3 text-slate-300 list-disc pl-5">
                            <li><strong class="text-white">Mandatory Team:</strong> You <strong>must be on the Sheriff's Team</strong> to use Staff vehicles.</li>
                            <li><strong class="text-white">Lighting:</strong> Keep your staff car in <strong>Stage 1 lights at all times</strong> when on-duty (unless in an emergency/pursuit).</li>
                            <li><strong class="text-white">Parking Protocol:</strong> When answering a mod call, always park on the <strong>sidewalk or a side road</strong> to avoid blocking traffic.</li>
                        </ul>
                    </section>

                    <!-- 2.2 Equipment -->
                    <section>
                        <h3 class="text-xl font-semibold text-purple-300 mb-3">ยง2.2 - Equipment & Weapons</h3>
                        <ul class="space-y-3 text-slate-300 list-disc pl-5">
                            <li><strong class="text-white">Primary Tool:</strong> Spectator/Fly Mode (via commands like :view).</li>
                            <li><strong class="text-white">Strict Restriction:</strong> All gear is <strong>strictly for administrative use</strong> and <strong>never</strong> for roleplay scenarios.</li>
                        </ul>
                    </section>

                    <!-- 2.3 Intervention -->
                     <section>
                        <h3 class="text-xl font-semibold text-purple-300 mb-3">ยง2.3 - Interference Protocols</h3>
                         <ul class="space-y-3 text-slate-300 list-disc pl-5">
                             <li><strong class="text-white">Non-Interference:</strong> <strong>DO NOT</strong> interfere with active RP scenarios unless absolutely necessary.</li>
                             <li><strong class="text-white">Safe Teleporting:</strong> When teleporting to a player, always appear in a <strong>safe, non-disruptive location</strong>.</li>
                             <li><strong class="text-white">Clarity:</strong> Always explain the reason for any punishment clearly to the player.</li>
                         </ul>
                    </section>
                </div>
            </div>

            <!-- ยง3.0 ENFORCEMENT -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-red-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-red-500/10 text-red-400 py-1 px-3 rounded-md text-lg mr-3">ยง3.0</span>
                    Enforcement & Punishments
                </h2>

                <div class="space-y-8">
                    <p class="text-slate-300 bg-slate-900 p-4 rounded-lg border border-slate-700">
                        <strong>Philosophy:</strong> Punishments depend on the severity of the rule break. Staff should always attempt to educate before punishing if possible.
                    </p>

                    <!-- 3.1 Matrix -->
                    <section>
                        <h3 class="text-xl font-semibold text-red-300 mb-3">ยง3.1 - Progressive Disciplinary Matrix</h3>
                        
                        <div class="overflow-x-auto rounded-lg border border-slate-700">
                            <table class="min-w-full divide-y divide-slate-700">
                                <thead class="bg-slate-900">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-bold text-slate-400 uppercase">Category / Rules</th>
                                        <th class="px-4 py-3 text-left text-xs font-bold text-slate-400 uppercase">Punishment Range</th>
                                        <th class="px-4 py-3 text-left text-xs font-bold text-slate-400 uppercase">Authority</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-slate-800 divide-y divide-slate-700 text-sm">
                                    <!-- ZERO TOLERANCE -->
                                    <tr data-severity="3">
                                        <td class="px-4 py-3">
                                            <span class="text-red-400 font-bold block mb-1">A. ZERO TOLERANCE (Severity 3)</span>
                                            <span class="text-slate-400 text-xs">Exploiting/Glitching, Harassment, Discrimination, LTAP, Severe FRP.</span>
                                        </td>
                                        <td class="px-4 py-3 text-red-300 font-bold">Temporary Ban (1-7 Days) โ Permanent Ban</td>
                                        <td class="px-4 py-3 text-slate-300 bg-red-900/20 border-l-2 border-red-500">Admin+ Only</td>
                                    </tr>
                                    
                                    <!-- MAJOR VIOLATIONS -->
                                    <tr data-severity="2">
                                        <td class="px-4 py-3">
                                            <span class="text-orange-400 font-bold block mb-1">B. MAJOR VIOLATIONS (Severity 2)</span>
                                            <span class="text-slate-400 text-xs">RDM (Random Deathmatch), VDM (Vehicle Deathmatch), Disrespecting Staff.</span>
                                        </td>
                                        <td class="px-4 py-3 text-orange-300">Kick โ Ban (on repeat)</td>
                                        <td class="px-4 py-3 text-slate-300">All Staff</td>
                                    </tr>

                                    <!-- MINOR VIOLATIONS -->
                                    <tr data-severity="1">
                                        <td class="px-4 py-3">
                                            <span class="text-yellow-400 font-bold block mb-1">C. MINOR VIOLATIONS (Severity 1)</span>
                                            <span class="text-slate-400 text-xs">FRP (Fail RP), Proper Comms (Spam/Mic Spam), GTA Driving, NLR (New Life Rule).</span>
                                        </td>
                                        <td class="px-4 py-3 text-yellow-300">Verbal/Written Warning โ Kick (on repeat)</td>
                                        <td class="px-4 py-3 text-slate-300">All Staff</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- 3.2 Evasion -->
                    <section>
                        <h3 class="text-xl font-semibold text-red-300 mb-3">ยง3.2 - Progression & Evasion</h3>
                         <ul class="space-y-3 text-slate-300 list-disc pl-5">
                            <li><strong class="text-amber-400">Escalation:</strong> If a user repeats a rule break (e.g., RDM) after a warning, move to the next punishment tier (Kick).</li>
                            <li><strong class="text-red-500">Punishment Evasion:</strong> Rejoining before a cooldown (e.g., after a KICK) results in an immediate <strong>2-WEEK BAN</strong>.</li>
                        </ul>
                    </section>
                </div>
            </div>

            <!-- ยง4.0 ACRONYM AND COMMAND GLOSSARY -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-emerald-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-emerald-500/10 text-emerald-400 py-1 px-3 rounded-md text-lg mr-3">ยง4.0</span>
                    Acronym & Command Glossary
                </h2>

                <p class="text-slate-400 mb-6">Click on a term below to see its definition and relevance to staff duty.</p>

                <div id="glossaryList" class="space-y-2 text-slate-300 bg-slate-900 p-4 rounded-xl border border-slate-700">
                    <!-- Glossary Item 1: FRP -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('FRP')">
                        <strong class="text-emerald-300">FRP</strong> (Fail Roleplay)
                        <div id="FRP-definition" class="glossary-definition">
                            <p class="text-sm">The act of breaking immersion by failing to adhere to the roleplay standards of the server (e.g., ignoring fear, running into a clearly hostile situation). **Punishment:** Minor Violation.</p>
                        </div>
                    </div>
                    <!-- Glossary Item 2: NLR -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('NLR')">
                        <strong class="text-emerald-300">NLR</strong> (New Life Rule)
                        <div id="NLR-definition" class="glossary-definition">
                            <p class="text-sm">Upon death, a player loses all memory of the incident that led to their death. They cannot return to the scene for 15 minutes. **Punishment:** Minor Violation.</p>
                        </div>
                    </div>
                    <!-- Glossary Item 3: RDM -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('RDM')">
                        <strong class="text-emerald-300">RDM</strong> (Random Deathmatch)
                        <div id="RDM-definition" class="glossary-definition">
                            <p class="text-sm">Killing another player without valid roleplay reason or initiation. **Punishment:** Major Violation.</p>
                        </div>
                    </div>
                    <!-- Glossary Item 4: LTAP -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('LTAP')">
                        <strong class="text-emerald-300">LTAP</strong> (Leaving to Avoid Punishment)
                        <div id="LTAP-definition" class="glossary-definition">
                            <p class="text-sm">A player disconnecting from the game after a rule break to avoid staff intervention or a punishment. **Punishment:** Zero Tolerance (Immediate Ban).</p>
                        </div>
                    </div>
                    <!-- Glossary Item 5: 10-7 -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('10-7')">
                        <strong class="text-emerald-300">10-7</strong> (Ten-Seven)
                        <div id="10-7-definition" class="glossary-definition">
                            <p class="text-sm">Staff radio code for **Off-Duty / Civilian Role**. Remember: DO NOT use admin commands (except :help/chat) while 10-7.</p>
                        </div>
                    </div>
                    <!-- Glossary Item 6: :view -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('VIEW')">
                        <code class="text-pink-400">:view [user]</code>
                        <div id="VIEW-definition" class="glossary-definition">
                            <p class="text-sm">Staff command to enter Spectator Mode and observe a player without interfering with their RP. Primary tool for investigation.</p>
                        </div>
                    </div>
                    <!-- Glossary Item 7: :to -->
                    <div class="glossary-item p-2 rounded-lg" onclick="toggleDefinition('TO')">
                        <code class="text-pink-400">:to [user]</code>
                        <div id="TO-definition" class="glossary-definition">
                            <p class="text-sm">Staff command to teleport to a player's location. Must be used carefully and land in a **safe, non-disruptive location**.</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END ยง4.0 ACRONYM AND COMMAND GLOSSARY -->
            
            <!-- ยง4.5 STAFF DISCIPLINARY WORKFLOW (NEW FEATURE) -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-pink-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-pink-500/10 text-pink-400 py-1 px-3 rounded-md text-lg mr-3">ยง4.5</span>
                    Staff Disciplinary Workflow
                </h2>
                <p class="text-slate-400 mb-6">Use this tool to find the correct, consistent punishment and generate the appeal message.</p>

                <div class="bg-slate-900 p-6 rounded-xl border border-slate-700 space-y-6">
                    
                    <!-- Input 1 & 2: Role and User ID -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Staff Role -->
                        <div class="space-y-2">
                            <label for="staffRole" class="text-white font-medium block">1. Your Staff Role (Authority)</label>
                            <select id="staffRole" class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg text-white focus:ring-indigo-500 focus:border-indigo-500 transition-colors" onchange="suggestPunishment()">
                                <option value="1">Regular Staff (Minor/Major)</option>
                                <option value="2">Admin+ (All Violations)</option>
                            </select>
                        </div>

                        <!-- Target User ID -->
                        <div class="space-y-2">
                            <label for="targetUser" class="text-white font-medium block">2. Target Player's Username/ID</label>
                            <input type="text" id="targetUser" placeholder="PlayerName#0000" class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg text-white focus:ring-indigo-500 focus:border-indigo-500 transition-colors" value="PlayerName" oninput="clearMessage()">
                        </div>
                    </div>

                    <!-- Input 3: Rules Broken -->
                    <div class="space-y-3 pt-2 border-t border-slate-700">
                        <p class="text-white font-medium mb-2">3. Select ALL Rules Broken (Checklist)</p>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <!-- Minor Violations (Severity 1) -->
                            <label class="flex items-center space-x-2 text-yellow-300">
                                <input type="checkbox" name="violation" value="1" data-violation-name="FRP (Fail Roleplay) / NLR" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>FRP (Fail RP) / NLR</span>
                            </label>
                            <label class="flex items-center space-x-2 text-yellow-300">
                                <input type="checkbox" name="violation" value="1" data-violation-name="Proper Comms / GTA Driving" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>Proper Comms / GTA Driving</span>
                            </label>
                            <!-- Major Violations (Severity 2) -->
                            <label class="flex items-center space-x-2 text-orange-300">
                                <input type="checkbox" name="violation" value="2" data-violation-name="RDM (Random Deathmatch) / VDM" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>RDM / VDM</span>
                            </label>
                             <label class="flex items-center space-x-2 text-orange-300">
                                <input type="checkbox" name="violation" value="2" data-violation-name="Disrespecting Staff" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>Disrespecting Staff</span>
                            </label>
                            <!-- Zero Tolerance (Severity 3) -->
                            <label class="flex items-center space-x-2 text-red-400">
                                <input type="checkbox" name="violation" value="3" data-violation-name="Exploiting / Harassment" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>Exploiting / Harassment</span>
                            </label>
                            <label class="flex items-center space-x-2 text-red-400">
                                <input type="checkbox" name="violation" value="3" data-violation-name="LTAP (Leaving to Avoid Punishment)" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>LTAP (Leaving to Avoid Punishment)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Input 4: History -->
                     <div class="space-y-2 pt-2 border-t border-slate-700">
                        <p class="text-white font-medium mb-2">4. Player History & Evasion</p>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <label class="flex items-center space-x-2 text-amber-300">
                                <input type="checkbox" id="isRepeat" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>Repeat Offender (Already Warned/Kicked)</span>
                            </label>
                            <label class="flex items-center space-x-2 text-red-500">
                                <input type="checkbox" id="isEvasion" onchange="suggestPunishment()" class="h-4 w-4 rounded">
                                <span>Punishment Evasion (Rejoining after kick/ban)</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Output 5: Suggested Punishments (Clickable) -->
                    <div id="punishmentSuggestions" class="space-y-2 mt-4 hidden">
                        <p class="font-bold text-lg text-indigo-300 border-b border-slate-700 pb-2">5. Select Appropriate Action:</p>
                        <div id="suggestionButtons" class="flex flex-wrap gap-3">
                            <!-- Buttons will be generated here -->
                        </div>
                        <p id="authorityWarning" class="text-sm text-red-400 italic mt-2"></p>
                    </div>

                    <!-- Output 6: Generated Message -->
                    <div id="messageOutput" class="mt-6 p-4 rounded-lg bg-emerald-900/30 border-l-4 border-emerald-500 hidden">
                        <p class="font-bold text-lg text-emerald-300 mb-2">6. Generated Punishment Message (Copy & Send):</p>
                        <textarea id="generatedMessage" rows="5" readonly class="w-full p-3 bg-slate-800 border border-emerald-600 rounded-lg text-white font-mono text-sm resize-none"></textarea>
                        <button onclick="copyMessage()" class="mt-2 px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-500 transition-colors">
                            Copy Message
                        </button>
                        <p id="copyFeedback" class="text-sm text-emerald-400 mt-2 hidden">Copied!</p>
                    </div>
                </div>
            </div>
            <!-- END ยง4.5 STAFF DISCIPLINARY WORKFLOW -->

            <!-- No Results Message (Kept here for filtering visibility) -->
            <div id="noResults" class="hidden bg-slate-800 border-l-4 border-amber-500 p-6 rounded-r-lg text-center">
                <p class="text-white text-lg font-medium">No results found.</p>
                <p class="text-slate-400">Try adjusting your search terms.</p>
            </div>

            <!-- ยง5.0 RULE KNOWLEDGE QUIZ -->
            <div class="content-section bg-slate-800 rounded-2xl shadow-lg p-8 border-l-4 border-yellow-500">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-yellow-500/10 text-yellow-400 py-1 px-3 rounded-md text-lg mr-3">ยง5.0</span>
                    Rule Knowledge Quiz
                </h2>
                <p class="text-slate-400 mb-6">Test your knowledge on the core staff and player rules below. You must answer 3 out of 4 questions correctly to pass.</p>

                <div id="quizContainer" class="bg-slate-900 p-6 rounded-xl border border-slate-700 space-y-6">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <div class="flex flex-col sm:flex-row gap-4 mt-6">
                    <button id="submitQuiz" onclick="submitQuiz()" class="w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 transition-colors shadow-md">
                        Submit Answers
                    </button>
                    <button id="resetQuiz" onclick="resetQuiz()" class="w-full sm:w-auto px-6 py-3 bg-slate-600 text-white font-bold rounded-lg hover:bg-slate-500 transition-colors shadow-md">
                        Reset Quiz
                    </button>
                </div>
                
                <div id="quizResult" class="mt-6 p-4 rounded-lg hidden">
                    <!-- Result message appears here -->
                </div>
            </div>
            <!-- END ยง5.0 QUIZ -->

        </main>
        
        <!-- Footer -->
        <footer class="mt-16 pt-8 border-t border-slate-700 text-center">
            <p class="text-slate-500 text-sm mb-2">&copy; 2025 TXRP Staff Team.</p>
            <p class="text-xs text-slate-600 uppercase tracking-wider">Melony Code: NFLDRU</p>
        </footer>

    </div>

    <script>
        // --- Quiz Data ---
        const quizQuestions = [
            {
                question: "What is the punishment for asking for a promotion?",
                options: ["Verbal Warning", "3-Day Suspension", "Immediate Termination"],
                answer: "Immediate Termination"
            },
            {
                question: "If a player disconnects to avoid punishment (LTAP), what is the MINIMUM resulting ban duration?",
                options: ["Kick", "2-Week Ban", "Permanent Ban"],
                answer: "2-Week Ban"
            },
            {
                question: "What must a staff member do immediately after logging a kick or ban?",
                options: ["Log the action in Melony", "Call higher staff", "Take a screenshot"],
                answer: "Log the action in Melony"
            },
            {
                question: "What is the minimum weekly quota (hours) for a regular staff member?",
                options: ["4 Hours", "5 Hours", "6 Hours"],
                answer: "6 Hours"
            }
        ];

        // --- Punishment Workflow Logic Data ---
        // Severity 1: Minor (Warning -> Kick)
        // Severity 2: Major (Kick -> Ban)
        // Severity 3: Zero Tolerance (Temp Ban -> Perm Ban)
        const PUNISHMENT_MATRIX = {
            // [Initial Action, Repeat Action]
            1: [
                { action: "Verbal Warning", color: "yellow-600", severity: 1 }, 
                { action: "Kick", color: "amber-600", severity: 1.5 }
            ], 
            2: [
                { action: "Kick", color: "amber-600", severity: 2 },
                { action: "Temporary Ban (3-7 Days)", color: "red-600", severity: 2.5 }
            ],
            3: [
                { action: "Temporary Ban (1-7 Days)", color: "red-600", severity: 3 },
                { action: "Permanent Ban", color: "red-800", severity: 3.5 }
            ],
            4: { action: "IMMEDIATE 2-WEEK BAN", color: "red-900", severity: 4 } // Evasion Override
        };

        const AUTHORITY_LEVEL = {
            Regular: 1, // Can only issue up to Kick (Severity < 2.5)
            Admin: 2    // Can issue all
        };

        // --- Punishment Workflow Functions ---

        function clearMessage() {
            document.getElementById('messageOutput').style.display = 'none';
            document.getElementById('copyFeedback').classList.add('hidden');
        }

        function generateButton(action, color, violationList) {
            const buttonsDiv = document.getElementById('suggestionButtons');
            const button = document.createElement('button');
            button.className = `punishment-button px-4 py-2 bg-${color} text-white font-semibold rounded-lg shadow-md hover:bg-opacity-90`;
            button.textContent = action;
            button.onclick = () => generatePunishmentMessage(action, violationList);
            buttonsDiv.appendChild(button);
        }
        
        function suggestPunishment() {
            const roleElement = document.getElementById('staffRole');
            const violations = document.querySelectorAll('input[name="violation"]:checked');
            const isRepeat = document.getElementById('isRepeat').checked;
            const isEvasion = document.getElementById('isEvasion').checked;
            const staffAuthority = parseInt(roleElement.value); 
            
            const buttonsDiv = document.getElementById('suggestionButtons');
            const suggestionsContainer = document.getElementById('punishmentSuggestions');
            const authorityWarning = document.getElementById('authorityWarning');
            buttonsDiv.innerHTML = '';
            authorityWarning.textContent = '';
            clearMessage();

            if (violations.length === 0 && !isEvasion) {
                suggestionsContainer.style.display = 'none';
                return;
            }

            suggestionsContainer.style.display = 'block';

            // 1. Check for Evasion (Highest Priority Override)
            if (isEvasion) {
                const evasion = PUNISHMENT_MATRIX[4];
                generateButton(evasion.action, evasion.color, ["Punishment Evasion (ยง3.2)"]);
                return;
            }

            // 2. Determine Maximum Severity
            let maxSeverity = 0;
            const violationNames = [];
            violations.forEach(v => {
                const severity = parseInt(v.value);
                if (severity > maxSeverity) {
                    maxSeverity = severity;
                }
                violationNames.push(v.getAttribute('data-violation-name'));
            });

            // Fallback if no violations are checked, but the function was triggered
            if (maxSeverity === 0) {
                 buttonsDiv.innerHTML = '<p class="text-slate-400">Please select the specific rules broken to generate suggestions.</p>';
                 return;
            }

            // 3. Generate Suggested Actions
            let actionList = [];

            // Base action for the highest severity
            const matrix = PUNISHMENT_MATRIX[maxSeverity];
            
            // Tier 1: Initial Action
            if (matrix[0]) {
                actionList.push(matrix[0]);
            }

            // Tier 2: Escalation (if repeat offender) or a slightly higher tier for multiple offenses
            if (isRepeat && matrix[1]) {
                actionList.push(matrix[1]);
            } else if (maxSeverity === 1 && violations.length >= 2 && matrix[1]) {
                 // Suggest kick if multiple minor violations occurred, even without official 'repeat' flag
                 actionList.push(matrix[1]);
            } else if (maxSeverity === 2 && violations.length >= 2 && matrix[1]) {
                 // Suggest Ban if multiple major violations
                 actionList.push(matrix[1]);
            }
            // If the max severity is 3 (Zero Tolerance), always include the Permanent Ban option
            if (maxSeverity === 3 && matrix[1]) {
                actionList.push(matrix[1]);
            }


            // 4. Generate Buttons and Check Authority
            let authorityIssue = false;
            let displayedActions = new Set(); // Use a set to prevent duplicate buttons (e.g., two checks lead to "Kick")

            actionList.forEach(item => {
                if (item.severity >= 2.5 && staffAuthority === AUTHORITY_LEVEL.Regular) {
                    authorityIssue = true;
                }

                if (!displayedActions.has(item.action)) {
                    // Only generate the button if the staff has the authority or if they are Admin+
                    if (item.severity < 2.5 || staffAuthority === AUTHORITY_LEVEL.Admin) {
                        generateButton(item.action, item.color, violationNames);
                        displayedActions.add(item.action);
                    } else if (staffAuthority === AUTHORITY_LEVEL.Regular && item.severity >= 2.5) {
                        authorityWarning.textContent = "Your current role (Regular Staff) cannot issue Bans. Please escalate this action to an Admin+.";
                    }
                }
            });

            if (buttonsDiv.innerHTML === '' && authorityIssue) {
                 // Case where only high-severity bans were suggested and staff role is Regular
                 buttonsDiv.innerHTML = '<p class="text-slate-400">Escalate this incident immediately (See warning below).</p>';
            }
        }


        function generatePunishmentMessage(action, violationList) {
            const user = document.getElementById('targetUser').value.trim();
            const violationReason = violationList.join(' and ');
            const appealCode = "TgCp5Cv7Wm"; // Updated communications code

            let message = `Hello ${user},\n\n`;

            if (action.includes("Warning")) {
                message += `You are receiving a ${action} for breaking the rules (${violationReason}). Please review the staff handbook (Rules ยง3.0) to avoid further disciplinary action.`;
            } else {
                // If it's a Kick or Ban, use filter-safe language and include the appeal code.
                message += `You are being ${action.toUpperCase()} for violating our rules, specifically for ${violationReason}. This action is final in-game.\n\n`;
                message += `You can appeal this by opening a ticket in our communications server. Our code is ${appealCode} (case sensitive).`;
            }

            document.getElementById('generatedMessage').value = message;
            document.getElementById('messageOutput').style.display = 'block';
        }

        function copyMessage() {
            const textarea = document.getElementById('generatedMessage');
            textarea.select();
            document.execCommand('copy');
            
            const feedback = document.getElementById('copyFeedback');
            feedback.classList.remove('hidden');
            setTimeout(() => {
                feedback.classList.add('hidden');
            }, 2000);
        }


        // --- General Handbook Functions (Filtering, Glossary, Init) ---

        function toggleDefinition(id) {
            const definition = document.getElementById(id + '-definition');
            if (definition.style.display === 'block') {
                definition.style.display = 'none';
            } else {
                definition.style.display = 'block';
            }
        }

        function filterContent() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const sections = document.querySelectorAll('.content-section');
            const noResults = document.getElementById('noResults');
            let found = false;

            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                const sectionVisible = text.includes(filter) || filter === '';
                section.style.display = sectionVisible ? 'block' : 'none';
                if (sectionVisible) {
                    found = true;
                }
            });

            noResults.style.display = found ? 'none' : 'block';
        }

        function jumpToHeader() {
            document.getElementById('searchInput').focus();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // --- Quiz Functions ---
        function loadQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';
            
            quizQuestions.forEach((q, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = 'p-4 border border-slate-700 rounded-lg bg-slate-800 shadow-md';
                qDiv.innerHTML = `
                    <p class="font-semibold text-white mb-3">Q${index + 1}: ${q.question}</p>
                    <div class="space-y-2 text-sm">
                        ${q.options.map(option => `
                            <label class="flex items-center space-x-2 text-slate-300">
                                <input type="radio" name="q${index}" value="${option}" class="h-4 w-4 text-indigo-500 bg-slate-700 border-slate-600 focus:ring-indigo-500">
                                <span>${option}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                container.appendChild(qDiv);
            });
        }

        function submitQuiz() {
            let correctAnswers = 0;
            const resultDiv = document.getElementById('quizResult');
            resultDiv.innerHTML = '';

            quizQuestions.forEach((q, index) => {
                const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
                if (selectedOption && selectedOption.value === q.answer) {
                    correctAnswers++;
                }
            });

            resultDiv.classList.remove('hidden', 'bg-red-900/30', 'bg-green-900/30');
            resultDiv.classList.add(correctAnswers >= 3 ? 'bg-green-900/30' : 'bg-red-900/30');
            resultDiv.classList.add(correctAnswers >= 3 ? 'border-green-500' : 'border-red-500');
            resultDiv.classList.add('border-l-4');

            if (correctAnswers >= 3) {
                resultDiv.innerHTML = `
                    <p class="text-2xl font-bold text-green-300">๐ Quiz Passed!</p>
                    <p class="text-white mt-2">You answered ${correctAnswers} out of ${quizQuestions.length} questions correctly. You demonstrate solid knowledge of the core rules.</p>
                `;
            } else {
                resultDiv.innerHTML = `
                    <p class="text-2xl font-bold text-red-300">๐จ Quiz Failed.</p>
                    <p class="text-white mt-2">You answered ${correctAnswers} out of ${quizQuestions.length} questions correctly. Please review the handbook sections and try again.</p>
                `;
            }
        }

        function resetQuiz() {
            document.getElementById('quizResult').classList.add('hidden');
            loadQuiz();
        }

        // --- Initialization ---
        window.onload = () => {
            loadQuiz();
            
            // Show the scroll-to-search button after a short delay
            setTimeout(() => {
                document.getElementById('scrollToSearch').classList.remove('opacity-0', 'scale-0');
                document.getElementById('scrollToSearch').classList.add('opacity-100', 'scale-100');
            }, 500);
        };
    </script>
</body>
</html>
